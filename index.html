<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
<title>You've GUAC to be Kidding Me!</title>
<style>
    :root{
        --bg: #ffffff;
        --scale-hover: 1.06;
        --scale-active: 1.12;
        --transition: 160ms cubic-bezier(.2,.9,.2,1);
        --shadow-hover: 0 8px 20px rgba(0,0,0,.12);
        --shadow-active: 0 12px 28px rgba(0,0,0,.16);
    }

    html,body {
        height: 100%;
        margin: 0;
    }

    body {
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background: var(--bg);
        position: relative;
        overflow: hidden;
        font-family: 'Comic Neue', 'Comic Sans MS', 'Comic Sans', cursive;
    }

    /* Make the image act like a button */
    a.guac-button {
        display: inline-block;
        border-radius: 12px; /* small radius for nicer touches on mobile */
        -webkit-tap-highlight-color: transparent;
        text-decoration: none;
        outline: none;
    }

    a.guac-button img {
        width: auto;
        height: 60vmin;
        object-fit: contain;
        display: block;
        transform-origin: center;
        transition: transform var(--transition), box-shadow var(--transition);
        will-change: transform;
        cursor: pointer;
        user-select: none;
    }

    /* hover / focus state (mouse and keyboard) */
    a.guac-button:hover img,
    a.guac-button:focus img,
    a.guac-button:focus-visible img {
        transform: scale(var(--scale-hover));
    }

    /* active / pressed state (mouse down or touch) */
    a.guac-button:active img,
    a.guac-button.pressed img {
        transform: scale(var(--scale-active));
    }

    /* visible focus outline for keyboard users */
    a.guac-button:focus-visible {
        box-shadow: 0 0 0 4px rgba(34,139,34,0.12);
        border-radius: 12px;
    }

    /* Small safeguard for very small viewports */
    @media (max-height: 400px) {
        a.guac-button img {
            height: 48vmin;
        }
    }

    .vignette {
        position: absolute;
        inset: 0;
        pointer-events: none;
        background: radial-gradient(circle at center, transparent 50%, rgba(0,0,0,0.75) 100%);
        opacity: 0;
        transition: opacity 15s ease-in;
    }

    .vignette.active {
        opacity: 1;
    }

    .shake-soft {
        animation: wobble 1s ease-in-out infinite;
    }

    .shake-strong {
        animation: wobble-strong 0.5s ease-in-out infinite;
    }

    @keyframes wobble {
        0% { transform: translate(0, 0) rotate(0deg); }
        25% { transform: translate(-1px, 1px) rotate(-1deg); }
        50% { transform: translate(1px, -1px) rotate(1deg); }
        75% { transform: translate(-1px, -1px) rotate(0deg); }
        100% { transform: translate(0, 1px) rotate(1deg); }
    }

    @keyframes wobble-strong {
        0% { transform: translate(0, 0) rotate(0deg); }
        20% { transform: translate(-3px, 3px) rotate(-2deg); }
        40% { transform: translate(3px, -3px) rotate(2deg); }
        60% { transform: translate(-3px, -2px) rotate(-1deg); }
        80% { transform: translate(2px, 3px) rotate(2deg); }
        100% { transform: translate(0, -2px) rotate(-1deg); }
    }

    .typewriter-container {
        position: absolute;
        bottom: 12vh;
        width: 100%;
        text-align: center;
        font-family: inherit;
        font-size: 5vmin;
        color: #1b1b1b;
        text-shadow: 1px 1px 2px rgba(255,255,255,0.5);
    }

    .typewriter-container .letter {
        display: inline-block;
        animation: letter-shake 0.28s ease-in-out infinite alternate;
        transform-origin: center;
    }

    @keyframes letter-shake {
        0% { transform: translate(0, 0) rotate(0deg); }
        30% { transform: translate(-1px, 1px) rotate(-2deg); }
        60% { transform: translate(1px, -1px) rotate(2deg); }
        100% { transform: translate(0, 0) rotate(0deg); }
    }
</style>
</head>
<body>
    <!-- Anchor navigates to /guacuments; acts like a button for accessibility -->
    <a class="guac-button" href="/guacuments" aria-label="Open Guacuments">
        <img src="guac.png" alt="guac">
    </a>
    <div class="vignette" aria-hidden="true"></div>
    <div class="typewriter-container" aria-live="polite"></div>

<script>
    // Add pressed class for touch interactions so tap gives the "bigger" effect.
    (function(){
        const btn = document.querySelector('.guac-button');
        const img = document.querySelector('.guac-button img');
        const vignette = document.querySelector('.vignette');
        const typewriterContainer = document.querySelector('.typewriter-container');
        if (!btn || !img || !vignette || !typewriterContainer) return;

        let touchActive = false;

        function setPressed(on){
            if (on) btn.classList.add('pressed');
            else btn.classList.remove('pressed');
        }

        function startTypewriter(){
            const text = 'enter the guacuments â„¢';
            const totalDuration = 5000; // 5 seconds to finish typing
            const redirectDelay = 15000; // after typing completes
            const step = totalDuration / text.length;
            let index = 0;
            typewriterContainer.textContent = '';

            const interval = setInterval(() => {
                const char = text[index];
                const span = document.createElement('span');
                span.innerHTML = char === ' ' ? '&nbsp;' : char;
                span.classList.add('letter');
                span.style.animationDelay = `${Math.random() * 0.2}s`;
                typewriterContainer.appendChild(span);

                index += 1;
                if (index >= text.length) {
                    clearInterval(interval);
                    setTimeout(() => {
                        window.location.href = 'guacuments.html';
                    }, redirectDelay);
                }
            }, step);
        }

        // Timed effects
        setTimeout(() => {
            vignette.classList.add('active');
            img.classList.add('shake-soft');
        }, 15000);

        setTimeout(() => {
            img.classList.remove('shake-soft');
            img.classList.add('shake-strong');
            startTypewriter();
        }, 30000);

        // Touch events
        btn.addEventListener('touchstart', function(e){
            touchActive = true;
            setPressed(true);
        }, {passive: true});

        btn.addEventListener('touchend', function(e){
            touchActive = false;
            setPressed(false);
            // Let the anchor follow the default tap navigation
        });

        btn.addEventListener('touchcancel', function(){
            touchActive = false;
            setPressed(false);
        });

        // Mouse events (desktop)
        btn.addEventListener('mousedown', function(){
            // Only show while mouse button is held
            setPressed(true);
        });
        document.addEventListener('mouseup', function(){
            setPressed(false);
        });

        // Keyboard: make Space behave like a button (Enter already activates anchor)
        btn.addEventListener('keydown', function(e){
            if (e.key === ' ' || e.key === 'Spacebar') {
                // Prevent the page from scrolling
                e.preventDefault();
                setPressed(true);
            }
        });
        btn.addEventListener('keyup', function(e){
            if (e.key === ' ' || e.key === 'Spacebar') {
                setPressed(false);
                // trigger navigation
                btn.click();
            }
        });
    })();
</script>
</body>
</html>
